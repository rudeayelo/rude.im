---
title: Taming vertical white space with leading-trim and stitches
summary:
  leading-trim is a CSS-in-JS helper to trim spacing above and below text
  elements, here's how I use it along with stitches
publishedAt: "2021-03-03"
image: https://i.microlink.io/https%3A%2F%2Fcards.microlink.io%2F%3Fpreset%3Dsimple%26p%3D2g6kPD4KICA8TGluawogICAgaHJlZj0naHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Tb3VyY2UrU2FucytQcm86d2dodEA0MDA7NjAwOzkwMCZkaXNwbGF5PWJsb2NrJwogICAgcmVsPSdzdHlsZXNoZWV0JwogIC8-CiAgPEZsZXgKICAgIHN4PXt7CiAgICAgIGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0JywKICAgICAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LXN0YXJ0JywKICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsCiAgICAgIGJnOiAiaHNsKDIwNSw1JSw3JSkiLAogICAgICBwYWRkaW5nOiAiNDBweCIKICAgIH19CiAgPgogICAgPHN2ZwogICAgICB3aWR0aD17MTIwfQogICAgICBoZWlnaHQ9ezExMn0KICAgICAgdmlld0JveD0iMCAwIDkwIDg0IgogICAgICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICJibG9jayIsIGZsZXhTaHJpbms6IDAgfX0KICAgID4KICAgICAgPHBhdGgKICAgICAgICBmaWxsPSJoc2woMjA1LDUlLDkwJSkiCiAgICAgICAgZD0iTTQ0LjY5NSAwQzYyLjc3Ny0uMDEgNzQuODU4IDMuNjgzIDgwLjk0IDExLjA4MmM1Ljk5OCA3LjI5NiA5LjAxOCAxNy4zODggOS4wNiAzMC4yNzR2LjM5MmMuMDMzIDEzLjI0OC0yLjk4NyAyMy42MDItOS4wNiAzMS4wNjJDNzQuOTIgODAuMjA2IDYzLjAxOCA4My45MzYgNDUuMjM2IDg0aC0uNDIxbC0uNjAzLS4wMDFDMjYuNjc0IDgzLjkxNSAxNC45MyA4MC4xODUgOC45OCA3Mi44MSAzLjAyOSA2NS40MzMuMDM2IDU1LjIyNyAwIDQyLjE5MnYtLjM5NkMtLjAyNCAyOC43IDIuOTcgMTguNDYxIDguOTggMTEuMDgyIDE0Ljk0NyAzLjc1NyAyNi43NC4wNjQgNDQuMzYzIDBMNDQuNjk1IDB6TTI5LjA1MyAxNS4xMjRsLS4xNzIuMDAxYy01LjY2Mi4wNC05LjQ1IDIuNC0xMS4zNjggNy4wODEtLjYzOCAxLjU1OS0xLjE3IDMuMzE3LTEuNTk3IDUuMjc1bC0uMTM4LjY2LS4wNzIuMzYzLS4wNTIuMjc1LS4wNS4yNzctLjA2Ni4zNzQtLjA2NC4zNzhjLS4wNTUuMzM4LS4xMDguNjgtLjE1NyAxLjAzbC0uMDczLjUyNS0uMDUyLjQtLjA1LjQwNC0uMDEyLjEwMS0uMDEyLjEwMi0uMDQ2LjQxLS4wNDQuNDE1LS4wMjEuMjEtLjAyLjIxLS4wNC40MjMtLjAzNy40MjgtLjAxLjEwNy0uMDA4LjEwOC0uMDMzLjQzNC0uMDMyLjQzOS0uMDIyLjMzMS0uMDIuMzM0LS4wMjYuNDUtLjAxOC4zNC0uMDE2LjM0Mi0uMDIuNDYtLjAxOC40NjQtLjAwOC4yMzQtLjAxNC40Ny0uMDEyLjQ3Ni0uMDA1LjI0LS4wMDQuMjQtLjAwNy40ODMtLjAwNS40ODktLjAwMS4xMjJ2LjEyM2wtLjAwMi40OTV2LjUwM2wuMDAxLjQ5NS4wMDIuMjQ2LjAwNS40ODguMDA3LjQ4NC4wMS40OC4wMTEuNDc0LjAxNC40NzEuMDA4LjIzNC4wMTguNDY0LjAyLjQ2LjAxNi4zNDMuMDE4LjM0LjAyNi40NDkuMDIuMzM0LjAyMi4zMzIuMDMyLjQzOC4wMzMuNDM0LjAxOC4yMTYuMDM3LjQyNy4wNC40MjQuMDIuMjEuMDIuMjA5LjA0NS40MTQuMDQ2LjQxLjAyNC4yMDQuMDUuNDA0LjA1Mi40Yy4wNDcuMzUzLjA5Ny43MDEuMTUgMS4wNDVsLjA4LjUxLjA2NC4zNzguMDY2LjM3NC4wNS4yNzcuMDUyLjI3NS4wNzIuMzYzYy40NDggMi4yMjUgMS4wMjYgNC4yMDMgMS43MzUgNS45MzUgMS44OTQgNC42MjUgNS42MTcgNi45ODQgMTEuMTY3IDcuMDc5bC4zNzMuMDAzLjE3Mi0uMDAxYzUuNjYxLS4wNCA5LjQ1LTIuNCAxMS4zNjctNy4wODEuNzEtMS43MzQgMS4yOS0zLjcxNCAxLjczNy01Ljk0MWwuMTE5LS42MTQuMDY4LS4zNzRjLjExNy0uNjU4LjIyNC0xLjMzNy4zMi0yLjAzNmwuMDkyLS43MDUuMDUtLjQxLjA0Ny0uNDEzLjA1Ni0uNTI0LjA1Mi0uNTMuMDM4LS40MjkuMDM3LS40MzQuMDI2LS4zMjguMDI1LS4zMy4wMy0uNDQ1LjAyOS0uNDQ5LjAyNi0uNDUzLjAxMi0uMjI4LjAxMi0uMjMuMDIxLS40NjIuMDItLjQ2Ni4wMTYtLjQ3MS4wMDgtLjIzNy4wMDctLjIzOS4wMTItLjQ4LjAxLS40ODQuMDA3LS40ODguMDA0LS4zNy4wMDItLjM3MS4wMDItLjV2LS41MDNsLS4wMDItLjUtLjAwMi0uMzcxLS4wMDQtLjM3LS4wMDgtLjQ4OC0uMDEtLjQ4NS0uMDExLS40OC0uMDA3LS4yMzgtLjAwOC0uMjM3LS4wMTctLjQ3LS4wMTktLjQ2Ny0uMDIxLS40NjItLjAxMi0uMjMtLjAxMi0uMjI4LS4wMjYtLjQ1My0uMDI4LS40NS0uMDMxLS40NDQtLjAyNS0uMzMtLjAyNi0uMzI4LS4wMzctLjQzNC0uMDM4LS40MjktLjA1Mi0uNTMtLjA1Ni0uNTIzLS4wNDctLjQxNC0uMDUtLjQxLS4wNzgtLjYwNS0uMDg0LS41OTYtLjA2LS4zOTFjLS40OC0zLjExNi0xLjE4NC01LjgwOC0yLjExNC04LjA3OC0xLjkzNi00LjcyNy01Ljc4Mi03LjA4OC0xMS41NC03LjA4MnptMzkuMTU1IDQzLjIyOGgtLjAzNmMtMS45MzcuMDA3LTMuMjMzLjQ0Mi0zLjg4OSAxLjMwNC0uNjYuODctLjk4OSAyLjA3NS0uOTg2IDMuNjE3di4wNDZjLjAwNCAxLjUzNS4zMzIgMi43MzcuOTg2IDMuNjA1LjY2My44OCAxLjk3OCAxLjMxOSAzLjk0OCAxLjMxOGguMDM3YzEuOTU0LS4wMDggMy4yNjEtLjQ0NyAzLjkyMy0xLjMxOC42NjctLjg3OCAxLTIuMDk3Ljk5Ni0zLjY1N3YtLjA0NmMtLjAwNS0xLjUxNy0uMzM3LTIuNzA1LS45OTYtMy41NjUtLjY2OC0uODctMS45OTYtMS4zMDYtMy45ODMtMS4zMDR6bS03LjY2Ni00My4yMjdsLS4zNzMuMDAzYy01LjU1LjA5NC05LjI3MyAyLjQ1My0xMS4xNjcgNy4wNzgtMS45MzYgNC43MjgtMi44OTcgMTEuMjkyLTIuODggMTkuNjkybC4zMTIuMDMuMzEuMDMgMS4yMTguMTEzIDEuMTg5LjEwMSAxLjE1OS4wOSAxLjEyOS4wNzYgMS4xLjA2NSAxLjA2OS4wNTQgMS4wNC4wNDEgMS4wMS4wMy45OC4wMTcuOTUuMDA2aC4yMzJsLjIzMS0uMDAyLjkwNi0uMDEyLjg3NS0uMDI0Ljg0Ni0uMDM2LjIwNy0uMDEuMjA1LS4wMTIuODAxLS4wNTQuMTk2LS4wMTUuMTkzLS4wMTYuNzU3LS4wNzFjMi41OTUtLjI3MSA0LjY0MS0uNzYgNi4xNC0xLjQ2OCAzLjkyNS0xLjg1NCA1Ljg4OC02LjMyNSA1Ljg4OC0xMy40MTIgMC0uODE4LS4wNjYtMS41NC0uMTktMi4xNzItLjM0NC0zLjY0LTEuNjY5LTYuMTcyLTMuOTc0LTcuNTkzLTIuNzMzLTEuNjg2LTYuMTg2LTIuNTI5LTEwLjM2LTIuNTI5eiIKICAgICAgICBmaWxsUnVsZT0iZXZlbm9kZCIKICAgICAgLz4KICAgIDwvc3ZnPgogICAgPEZsZXggc3g9e3sKICAgICAgbWFyZ2luVG9wOiA0LAogICAgICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsCiAgICAgIGp1c3RpZnlDb250ZW50OiAnZmxleC1zdGFydCcsCiAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLAogICAgfX0-CiAgICA8VGV4dAogICAgICBzeD17ewogICAgICAgIGZvbnRGYW1pbHk6ICdTb3VyY2UgU2FucyBQcm8nLAogICAgICAgIGZvbnRTaXplOiA1LAogICAgICAgIGZvbnRXZWlnaHQ6IDYwMCwKICAgICAgICBjb2xvcjogImhzbCgyMDUsNSUsNjUlKSIsCiAgICAgIH19CiAgICA-CiAgICAgIFJ1ZGUgQXllbG8KICAgIDwvVGV4dD4KICAgIDxUZXh0CiAgICAgIHN4PXt7CiAgICAgICAgZm9udEZhbWlseTogJ1NvdXJjZSBTYW5zIFBybycsCiAgICAgICAgZm9udFNpemU6IDcsCiAgICAgICAgZm9udFdlaWdodDogOTAwLAogICAgICAgIGxpbmVIZWlnaHQ6IDEsCiAgICAgICAgY29sb3I6ICJoc2woMjA1LDUlLDkwJSkiCiAgICAgIH19CiAgICA-CiAgICAgIFRhbWluZyB2ZXJ0aWNhbCB3aGl0ZSBzcGFjZSB3aXRoIGxlYWRpbmctdHJpbSBhbmQgc3RpdGNoZXMKICAgIDwvVGV4dD4KICAgIDwvRmxleD4KICA8L0ZsZXg-CjwvPg%23
---

I've been designing and developing websites for a while now and one of the
trickiest issues I always come accross is **handling vertical white space
between text nodes**. When working on a layout in a visual design app, my
typical workflow is:

1. Place text right near the previous/next one
2. Nudge up/down on a 4px basis until it looks right
3. Repeat

That way I'm able to ship solid and crisp designs quite quickly.

Translating those designs to HTML/CSS is a whole different story, text bounding
boxes are defined by the `line-height` in use and it's not so easy to separate
text blocks using a **consistent spacing system**.

That's why a while ago I created [leading-trim], a little CSS-in-JS helper to
trim spacing above and below the first and last lines of a text block. You can
check what it does in this demo:

<LeadingTrimDemo />

Since I'm using [stitches] to write the styles for this site, I thought I could
make a little wrapper around **leading-trim** using its `utils` feature

```ts
import { createCss } from "@stitches/react";
import { leadingTrim } from "leading-trim";

const { styled } = createCss({
  theme: {
    fonts: {
      sans:
        "Source Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif",
    },
    fontSizes: {
      1: "16px",
      2: "20px",
    },
    lineHeights: {
      1: "1.5",
      2: "1.4",
    },
  }
  utils: {
    textSize: ({ theme }) => (value: `$${keyof typeof theme.fontSizes}`) => {
      const size = value.substr(1);

      return {
        textSize: value,
        margin: 0,
        ...leadingTrim({
          lineHeight: Number(theme.lineHeights[size]),
          reference: {
            textSize: 40,
            lineHeight: 1,
            topCrop: 4,
            bottomCrop: 8,
          },
        }),
      };
    },
  },
});

const Text = styled("p", {
  textSize: "$1"
});
```

I'm keeping a direct relation between `fontSizes` and `lineHeights` so font size
`$1` goes well with line height `$1`, that eases a bit the definition of the
util. [In this site the definition is a bit more complex][style-src] to allow
setting `line-height` on the fly and also adjusting leading-trim's `correction`:

```ts
textSize: "$1 / $1 / 2 / -1";
```

The `value` taken by the util is typed to match the `fontSizes` provided in the
`theme`, but [in this site I'm losely typing it][style-src] to allow other
values like `clamp($6, 5vw, $7)` and have responsive font sizes (`leadingTrim`
returns sizes in `em` so it works perfectly fine). In that case parsing the size
requires looking up for a specific token:

```ts
const sizes = value.match(/\$(\d+)/g);
const largestSize = sizes[sizes.length - 1].substring(1);
```

`leadingTrim` returns an object of CSS styles so we can destructure it right
away

---

Since I started using this technique I feel way more confident about the outcome
of my code and I don't go into visual design tools that much anymore.

[Drop me a line on Twitter](https://twitter.com/Rude) if you'd be interested in
an _npm package_ wrapping this util to easily include **leading-trim** in your
stitches based sites.

If your'e interested go check [leading-trim on Github][leading-trim], which has
some more information and links about the topic.

[leading-trim]: https://github.com/rudeayelo/leading-trim
[stitches]: https://stitches.dev/
[style-src]: https://github.com/rudeayelo/rude.im/blob/main/src/styles.ts
